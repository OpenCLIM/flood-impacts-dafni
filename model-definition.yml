kind: Model
api_version: v1beta1
metadata:
  display_name: Flood Impacts (OpenCLIM)
  publisher: Newcastle University
  name: flood-impacts
  summary: Assess flood impacts using OS MasterMap
  description: Calculates maximum depths, velocity depth products and flooded perimeters of flooded buildings
  source_code: https://github.com/openclim/flood-impacts-dafni
spec:
  inputs:
    parameters:
      - name: THRESHOLD
        title: Threshold depth (m)
        description: Minimum water depth used to assign buildings as flooded
        type: number
        default: 0.3
        required: true
        min: 0
        max: 1

    dataslots:
      - name: MasterMap
        description: OS MasterMap buildings geopackage. Must contain a 'toid' attribute.
        default:
          - 8fadd93c-a8aa-41d2-8adb-5d615db89b3c
        path: inputs/mastermap
        required: true

      - name: UPRN
        description: Lookup between TOID and UPRN identifiers (CSV)
        default:
          - 9c1fbe4d-c322-465d-9c9f-6d34da30e8a6
        path: inputs/uprn
        required: false

      - name: Depth/damage curves
        description: CSV files named residential.csv and nonresidential.csv relating depth (m) to damage (Â£/m2)
        default:
          - d0701ef5-6f59-43c7-b161-a956b7dd361a
        path: inputs/dd-curves
        required: true


  outputs:
    datasets:
      - name: outputs/buildings.csv
        type: CSV
        description: Maximum depths & velocity depth products and flooded perimeters of flooded buildings
